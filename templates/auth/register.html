<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Usuario - PathFinder AI</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/register.css' %}">
</head>
<body>
<div class="container">
  <div class="header">
    <h1>REGISTRO DE USUARIO</h1>
    <span class="icon">ğŸ‘¤</span>
  </div>
  <p class="subtitle">Completa tus datos para empezar a usar el asistente</p>

  {% if messages %}
    <div class="messages">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <form method="post" id="registerForm">
    {% csrf_token %}

    <div class="form-grid">
      <!-- Nombre completo -->
      <div class="form-group">
        <label for="{{ form.full_name.id_for_label }}">
          Nombre completo
        </label>
        <div class="input-wrapper">
          {{ form.full_name }}
          <div class="input-icons">
            <button type="button" class="icon-btn" title="Entrada por voz">ğŸ¤</button>
            <span class="validation-icon" data-field="full_name" style="display: none;">âœ“</span>
          </div>
        </div>
        {% if form.full_name.errors %}
          <span class="error-message">{{ form.full_name.errors.0 }}</span>
        {% endif %}
      </div>

      <!-- Correo ElectrÃ³nico (principal) -->
      <div class="form-group">
        <label for="{{ form.email.id_for_label }}">
          Correo ElectrÃ³nico/Usuario
        </label>
        <div class="input-wrapper">
          {{ form.email }}
          <div class="input-icons">
            <button type="button" class="icon-btn" title="Entrada por voz">ğŸ¤</button>
            <span class="validation-icon" data-field="email" style="display: none;">âœ“</span>
          </div>
        </div>
        {% if form.email.errors %}
          <span class="error-message">{{ form.email.errors.0 }}</span>
        {% endif %}
      </div>

      <!-- Correo Emergencia (REQUIRED) -->
      <div class="form-group">
        <label for="{{ form.emailEmergency.id_for_label }}">
          Correo ElectrÃ³nico de Emergencia
        </label>
        <div class="input-wrapper">
          {{ form.emailEmergency }}
          <div class="input-icons">
            <button type="button" class="icon-btn" title="Entrada por voz">ğŸ¤</button>
            <span class="validation-icon" data-field="emailEmergency" style="display: none;">âœ“</span>
          </div>
        </div>
        {% if form.emailEmergency.errors %}
          <span class="error-message">{{ form.emailEmergency.errors.0 }}</span>
        {% endif %}
      </div>

      <!-- Correo Alternativo (OPCIONAL) -->
      <div class="form-group">
        <label for="{{ form.emailAlternative.id_for_label }}">
          Correo ElectrÃ³nico Alternativo <small>(opcional)</small>
        </label>
        <div class="input-wrapper">
          {{ form.emailAlternative }}
          <div class="input-icons">
            <button type="button" class="icon-btn" title="Entrada por voz">ğŸ¤</button>
            <span class="validation-icon" data-field="emailAlternative" style="display: none;">âœ“</span>
          </div>
        </div>
        {% if form.emailAlternative.errors %}
          <span class="error-message">{{ form.emailAlternative.errors.0 }}</span>
        {% endif %}
      </div>

      <!-- ContraseÃ±a -->
      <div class="form-group">
        <label for="{{ form.password1.id_for_label }}">
          ContraseÃ±a
        </label>
        <div class="input-wrapper">
          {{ form.password1 }}
          <div class="input-icons">
            <button type="button" class="icon-btn" title="Entrada por voz">ğŸ¤</button>
            <button type="button" class="toggle-password-btn" data-target="password1"
                    title="Mostrar/Ocultar contraseÃ±a">ğŸ‘ï¸
            </button>
            <span class="validation-icon" data-field="password1" style="display: none;">âœ“</span>
          </div>
        </div>
        {% if form.password1.errors %}
          <span class="error-message">{{ form.password1.errors.0 }}</span>
        {% endif %}
      </div>

      <!-- Confirmar ContraseÃ±a -->
      <div class="form-group">
        <label for="{{ form.password2.id_for_label }}">
          Confirmar contraseÃ±a
        </label>
        <div class="input-wrapper">
          {{ form.password2 }}
          <div class="input-icons">
            <button type="button" class="icon-btn" title="Entrada por voz">ğŸ¤</button>
            <button type="button" class="toggle-password-btn" data-target="password2"
                    title="Mostrar/Ocultar contraseÃ±a">ğŸ‘ï¸
            </button>
            <span class="validation-icon" data-field="password2" style="display: none;">âœ“</span>
          </div>
        </div>
        {% if form.password2.errors %}
          <span class="error-message">{{ form.password2.errors.0 }}</span>
        {% endif %}
      </div>

      <!-- Contacto de emergencia -->
      <div class="form-group">
        <label for="{{ form.emergency_contact.id_for_label }}">
          Contacto de emergencia
        </label>
        <div class="input-wrapper">
          {{ form.emergency_contact }}
          <div class="input-icons">
            <button type="button" class="icon-btn" title="Entrada por voz">ğŸ¤</button>
            <span class="validation-icon" data-field="emergency_contact" style="display: none;">âœ“</span>
          </div>
        </div>
        {% if form.emergency_contact.errors %}
          <span class="error-message">{{ form.emergency_contact.errors.0 }}</span>
        {% endif %}
      </div>

      <!-- Edad -->
      <div class="form-group">
        <label for="{{ form.age.id_for_label }}">
          Edad
        </label>
        <div class="input-wrapper">
          {{ form.age }}
          <div class="input-icons">
            <button type="button" class="icon-btn" title="Entrada por voz">ğŸ¤</button>
            <span class="validation-icon" data-field="age" style="display: none;">âœ“</span>
          </div>
        </div>
        {% if form.age.errors %}
          <span class="error-message">{{ form.age.errors.0 }}</span>
        {% endif %}
      </div>

      <!-- Contacto alternativo -->
      <div class="form-group">
        <label for="{{ form.alternative_contact.id_for_label }}">
          Contacto alternativo
        </label>
        <div class="input-wrapper">
          {{ form.alternative_contact }}
          <div class="input-icons">
            <button type="button" class="icon-btn" title="Entrada por voz">ğŸ¤</button>
            <span class="validation-icon" data-field="alternative_contact" style="display: none;">âœ“</span>
          </div>
        </div>
        {% if form.alternative_contact.errors %}
          <span class="error-message">{{ form.alternative_contact.errors.0 }}</span>
        {% endif %}
      </div>
    </div>

    <!-- Card del Asistente -->
    <div class="assistant-card">
      <div class="assistant-illustration">
        <img src="{% static 'images/assistant-illustration.png' %}"
             alt="Asistente de navegaciÃ³n para personas con discapacidad visual">
      </div>

      <div class="assistant-content">
        <h3>ASISTENTE</h3>
        <p>DE NAVEGACIÃ“N<br>PARA PERSONAS CON<br>DISCAPACIDAD</p>
      </div>
    </div>

    <div class="submit-section">
      <button type="submit" class="btn-submit">
        Crear cuenta
      </button>
      <p class="login-link">
        Ya tienes cuenta? <a href="{% url 'auth_api:login' %}">Inicia SesiÃ³n </a>
      </p>
    </div>
  </form>
</div>

<script src="{% static 'js/voice_recognition_register.js' %}"></script>
</body>
</html>
